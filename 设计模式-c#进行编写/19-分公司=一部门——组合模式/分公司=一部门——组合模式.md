# 分公司=一部门——组合模式

> 定义：将对象组合成树状结构以表示'部分—整体'的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性



![组合模式结构图](C:\Typora\设计模式picture\第十九章\组合模式结构图.png)

![组合模式1](C:\Typora\设计模式picture\第十九章\组合模式1.png)

![组合模式2](C:\Typora\设计模式picture\第十九章\组合模式2.png)

![组合模式3](C:\Typora\设计模式picture\第十九章\组合模式3.png)

![组合模式4](C:\Typora\设计模式picture\第十九章\组合模式4.png)

![组合模式5](C:\Typora\设计模式picture\第十九章\组合模式5.png)

可以看到上面的实现中，叶子结点其实是没必要有Add和Remove的，但我们还是实现了，这叫做

==透明方式==

> 透明方式，是说在Component中声明了所有用来管理子对象的方法，其中包括Add、Remove等。这样实现Component接口的所有子类都具备了这两个函数，**好处是叶子和枝节点没有区别，它们具有完全一致的行为接口。坏处是实现是没有意义的**

==安全方式==

> 也就是在Component接口中不去声明Add和Remove方法，那么子类的Leaf也就不需要去实现它，而是在Composite声明所有管理子类对象的方法**坏处是不够透明，所以叶子和树枝不具有相同的接口，客户端的调用需要做相应的判断**

**什么时候使用组合模式？**

需求中是体现部分与整体层次的结构时，希望用户忽略组合对象与单个对象的不同，统一的使用组合结构中的所有对象时

**组合模式的好处**

既包含了基本对象又包含了层次对象，组合模式可以让客户可以一致地使用组合结构和单个对象